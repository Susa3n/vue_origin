{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/Array.js","../src/observer/index.js","../src/state.js","../src/compiler/parseHtml.js","../src/compiler/generate.js","../src/compiler/index.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isFunction(value) {\r\n  return typeof value === 'function'\r\n}\r\nexport function isObject(value) {\r\n  return typeof value === 'object' && value != null\r\n}","let oldMethods = Array.prototype\r\nexport let arrayMethods = Object.create(oldMethods) // 旧数组的原型方法\r\nlet methods = [\r\n  'push',\r\n  'shift',\r\n  'unshift',\r\n  'splice',\r\n  'pop',\r\n  'sort',\r\n  'reverse'\r\n]\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) { // args 是参数列表\r\n  // 这里的this指的是谁调的   比如data: {a:[1,2,3]}  vm.a.push(4) 此时[1,2,3]就为当前的this\r\n    oldMethods[method].call(this, ...args) // 执行旧数组上的方法\r\n    let inserted;\r\n    let ob = this.__ob__ // 在对数组外层观测时 将当前实例挂载的this挂载到__ob__属性\r\n    switch (method) { // 判断如果是push  shift splice 方法  对于新增的属性进行数据劫持 args为新增的数据\r\n      case 'push':\r\n      case 'shift':\r\n        inserted = args \r\n        break;\r\n      case 'splice': // splice的第二个参数以后都为新增的数据\r\n        inserted = args.slice(2)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (inserted) ob.observerArray(inserted) // 通过observerArray递归进行数据劫持\r\n  }\r\n})","\r\nimport { isObject } from \"../utils\";\r\nimport {arrayMethods} from './Array'\r\n\r\n// 如果数据是对象 会对对象递归 进行数据劫持\r\n// 如果是数组 会劫持数组的方法 并对数组上不是基本数据类型的数据进行数据劫持\r\n\r\nclass Observer {\r\n  constructor(data) { \r\n    // 给要劫持的数据上添加__ob__属性，指定为当前this（两个作用）\r\n      // 一： observe劫持数据时可以通过是否有__ob__属性来判断是否已经劫持过 劫持过直接return\r\n      // 二：调用数组的方法（push、shift、splice...）对于新增的数据，可以通过this.__ob__.observerArray递归劫持\r\n    // data.__ob__ = this   如果直接放到data的属性上，当walk(data)时会遍历__ob__上的属性，导致递归爆栈\r\n    // 解决方法： 通过 Object.defineProperty 设置不可枚举\r\n    Object.defineProperty(data,'__ob__',{\r\n      value: this,\r\n      enumerable: false // 不可枚举\r\n    })\r\n    if(Array.isArray(data)){ // 处理数组格式\r\n      // 对数组劫持的逻辑\r\n      data.__proto__ = arrayMethods  // 对数组原来的方法进行重改\r\n      this.observerArray(data) // 对数据中的数据 进行递归劫持\r\n    }else { //处理对象格式\r\n      this.walk(data) // 对对象中所有的属性进行数据劫持\r\n    }\r\n  }\r\n  observerArray(data){\r\n    for(let i = 0; i<data.length; i++) { // 遍历数组中的每一项 劫持数据\r\n      observe(data[i])\r\n    }\r\n  }\r\n\r\n  walk(data) {\r\n    Object.keys(data).forEach(key => { // 遍历data拿到所有的key\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n\r\n\r\n}\r\n\r\nfunction defineReactive(data,key,value) { // 将数据定义为响应式\r\n  observe(value) // value可能还是对象  递归进行劫持\r\n  Object.defineProperty(data,key,{\r\n    get() {\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      // 如果set的newValue是一个对象 也要对对象进行劫持\r\n      observe(newValue)\r\n      value = newValue\r\n    }\r\n  })\r\n}\r\n\r\n\r\nexport function observe(data) { // 观测数据\r\n  // 判断用户返回的data是否是对象 如果不是直接返回\r\n  if (!isObject(data)) {\r\n    return\r\n  }\r\n\r\n  if(data.__ob__){\r\n    return\r\n  }\r\n\r\n  // data最外层默认是对象\r\n  return new Observer(data) // 返回一个实例\r\n}\r\n\r\n\r\n/**\r\n * data(){\r\n *  return {\r\n *      person: [{name:'susa3n'}]\r\n *    }\r\n * }\r\n * 完整的初始化流程：\r\n *  observe最开始观测data时，最外层是对象形式，遍历所有的key，进行数据劫持，\r\n * 将当前实例挂载到数组上__ob__ = this，当发现第二层值为数组时，调用observerArray方法，传入当前值，遍历数组进行递归劫持。\r\n * vm.person.push({name:'lisi'}) 执行旧数组原型上的方法 对新增的数据 通过__ob__.observerArray(args)\r\n * \r\n */","import { isFunction } from \"./utils\" // 引入工具函数判断当前值是否是函数类型\r\nimport { observe } from \"./observer/index\"\r\nexport function initState(vm) {\r\n  const opts = vm.$options \r\n  if(opts.data) { // 如果选项中有data\r\n    initData(vm) // 对data进行初始化\r\n  }\r\n  // if(opts.computed){\r\n  //   initComputed()\r\n\r\n  // }\r\n  // if(opts.watch){\r\n  //   initWatch()\r\n  // }\r\n}\r\n\r\nfunction initData(vm) { // 初始化data方法\r\n  let data = vm.$options.data // vm中$符号开头的属性不会被代理\r\n  // vue2中会将所有层次的数据进行数据劫持 通过Object.defineProperty\r\n\r\n  // call的原因 data中所有数据的this都指向当前实例 vm\r\n  data = vm._data = isFunction(data) ? data.call(vm) : data \r\n  for (const key in data) { // 通过proxy代理将data上的数据定义vm上，当读取属性时还是走的observe\r\n    proxy(vm,'_data',key)\r\n  }\r\n  // 观测数据 将数据变为响应式的\r\n  observe(data)\r\n}\r\n\r\nfunction proxy(vm,source,key) {\r\n  Object.defineProperty(vm,key,{\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newValue) {\r\n      vm[source][key] = newValue\r\n    }\r\n  })\r\n}","\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // abc-aaa\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // <aaa:asdads>\r\n//  /^<((?:[a-zA-Z_][\\-\\.0-9_a-zA-Z]*\\:)?[a-zA-Z_][\\-\\.0-9_a-zA-Z]*)/\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名 \r\n// /^<\\/((?:[a-zA-Z_][\\-\\.0-9_a-zA-Z]*\\:)?[a-zA-Z_][\\-\\.0-9_a-zA-Z]*)[^>]*>/\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >  <div>\r\n\r\n\r\nlet root = null;\r\nlet currParent;\r\nlet stack = [];\r\nconst ELEMENT_TYPE = 1 // 标签节点  \r\nconst TEXT_TYPE = 3 // 文本节点\r\n\r\n// 将html字符串通过正则的形式解析出ast\r\nexport function parserHtml(html) { // <div id=\"app\"></app>\r\n  while (html) { // 循环解析\r\n    let textEnd = html.indexOf('<') // 查看是否以<开头\r\n    if (textEnd == 0) {\r\n      const startTagMatch = parseStartTag() // 解析开始标签\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n\r\n      const endTagMatch = parseEndTag(html)\r\n      if (endTagMatch) {\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n\r\n    }\r\n    let text\r\n    if (textEnd > 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      chars(text)\r\n      advance(text.length)\r\n    }\r\n\r\n  }\r\n\r\n  function parseStartTag() {\r\n    let start = html.match(startTagOpen) // 将模板字符串匹配开始标签\r\n    if (start) { // 匹配到 创建match对象保存当前 开始标签名 默认属性为空\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length) // 截取已经匹配到的开始标签\r\n      let end, attr\r\n      // 循环匹配 不结束标签 和 属性 当两者同时成立时 拿去匹配到的属性名和属性值 push到 match中 \r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\r\n        advance(attr[0].length) // 截取已经匹配到的属性\r\n      }\r\n      if (end) { // 当匹配到结束标签时\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  function parseEndTag() {\r\n    let endTagMatch = html.match(endTag) // 将模板字符串匹配开始标签\r\n    advance(endTagMatch[0].length)\r\n    return endTagMatch\r\n  }\r\n\r\n  function advance(len) {\r\n    html = html.substring(len)\r\n  }\r\n\r\n  return root\r\n}\r\n\r\n\r\nfunction createElement(tagName, attrs) {\r\n  return {\r\n    type: ELEMENT_TYPE,\r\n    tag: tagName,\r\n    children: [],\r\n    attrs,\r\n    parent: null\r\n  }\r\n}\r\n\r\nfunction start(tagName, tagAttrs) {\r\n  let element = createElement(tagName, tagAttrs)\r\n  if (!root) {\r\n    root = element\r\n  }\r\n  stack.push(element)\r\n  currParent = element\r\n}\r\nfunction end(tagName) {\r\n  let currentElement = stack.pop()\r\n  let parentElement = stack[stack.length - 1]\r\n  if (tagName == currentElement.tag) {\r\n    if (parentElement) {\r\n      parentElement.children.push(currentElement)\r\n      currentElement.parent = parentElement\r\n    }\r\n  }\r\n}\r\nfunction chars(text) {\r\n  text = text.replace(/\\s/g, '')\r\n  if (text) {\r\n    currParent.children.push({\r\n      type: TEXT_TYPE,\r\n      text\r\n    })\r\n  }\r\n}\r\n\r\n","\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g  // 匹配插值语法\r\n\r\nfunction geneProps(attrs) {\r\n  let props = ``\r\n  attrs.forEach(attr => {\r\n    if(attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').forEach(styleItem => {\r\n        let [key,value] = styleItem.split(':')\r\n        obj[key] = `${value}`\r\n      })\r\n      attr.value = obj\r\n    }\r\n    props += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  })\r\n  return `{${props.slice(0,-1)}}`\r\n}\r\n\r\nfunction gen(node) {\r\n  if(node.type == 1){\r\n    return generate(node)\r\n  }else {\r\n    let text = node.text\r\n    let tokens = [];\r\n    let match;\r\n    let lastIndex = defaultTagRE.lastIndex = 0\r\n    while(match = defaultTagRE.exec(text)){\r\n      let index = match.index //开始索引\r\n      if(index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex,index))) // 截取普通字符串\r\n      }\r\n      tokens.push(match[1].trim()) // 截取插值语法字符串\r\n      lastIndex = index + match[0].length\r\n    }\r\n    if(lastIndex<text.length) {\r\n      tokens.push(text.slice(lastIndex))\r\n    }\r\n    return `_v(${tokens.join('+')})`\r\n  }\r\n}\r\n\r\nfunction geneChildren(root) {\r\n  let children = root.children\r\n  if(children && children.length > 0) {\r\n    return children.map(c => gen(c)).join(',') \r\n  }else{\r\n    return false\r\n  }\r\n}\r\n\r\nexport function generate(root) {\r\nlet children = geneChildren(root)\r\n  let code = `_c('${root.tag}',${root.attrs.length > 0 ? geneProps(root.attrs) : undefined}${children ? `,${children}` : ''})`\r\n  console.log(code);\r\n  return code\r\n}","\r\nimport { parserHtml } from \"./parseHtml\"\r\nimport { generate } from \"./generate\";\r\nexport function compileToFunction(template) {\r\n  let root = parserHtml(template) // 编译模板字符串 转为 ast语法\r\n  let code = generate(root)\r\n   \r\n  // console.log(code);\r\n}\r\n\r\n","import { initState } from \"./state\"\r\nimport { compileToFunction } from \"./compiler/index\"\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function(options) {\r\n    const vm = this // 缓存this 保存到当前作用域\r\n    vm.$options = options  // 将选项保存到实例的$options\r\n\r\n    // 对数据进行初始化 比如 data  computed watch ...\r\n    initState(vm)\r\n\r\n    if(vm.$options.el){\r\n      vm.$mount(vm.$options.el) // 挂载界面，如果当前配置项有el属性，传入当前el\r\n    }\r\n  }\r\n  Vue.prototype.$mount = function(el) {\r\n    const vm = this\r\n    let options = vm.$options\r\n    el = document.querySelector(el)\r\n    if(!options.render) { // render配置项高于el\r\n      let template = options.template\r\n      if(!template && el) { // 判断配置项是否有template属性  如果没有就拿el的outerHTML\r\n        template = el.outerHTML // 模板字符串  之后通过正则进行匹配 将模板字符串转为render渲染函数\r\n        let render = compileToFunction(template)\r\n        options.render = render // 挂载到配置项中，以后数据发生变化 可以通过配置项直接执行渲染函数\r\n      }\r\n    } \r\n  }\r\n\r\n}\r\n","import {initMixin} from './init'\r\nfunction Vue (options) { \r\n  // options 用户传入的选项\r\n  this._init(options) // 根据选项进行初始化\r\n}\r\n\r\ninitMixin(Vue) // 给Vue的原型添加_init的方法，传入Vue\r\n\r\nexport default Vue"],"names":["isFunction","value","isObject","oldMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","call","inserted","ob","__ob__","slice","observerArray","Observer","data","defineProperty","enumerable","isArray","__proto__","walk","i","length","observe","keys","key","defineReactive","get","set","newValue","initState","vm","opts","$options","initData","_data","proxy","source","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currParent","stack","ELEMENT_TYPE","TEXT_TYPE","parserHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","parseEndTag","end","text","substring","chars","advance","match","attr","push","name","len","createElement","type","tag","children","parent","tagAttrs","element","currentElement","pop","parentElement","replace","defaultTagRE","geneProps","props","obj","split","styleItem","JSON","stringify","gen","node","generate","tokens","lastIndex","exec","index","trim","join","geneChildren","map","c","code","undefined","console","log","compileToFunction","template","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,UAAT,CAAoBC,KAApB,EAA2B;EAChC,EAAO,OAAA,OAAOA,KAAP,KAAiB,UAAxB,CAAA;EACD,CAAA;EACM,SAASC,QAAT,CAAkBD,KAAlB,EAAyB;EAC9B,EAAA,OAAO,QAAOA,KAAP,CAAA,KAAiB,QAAjB,IAA6BA,KAAK,IAAI,IAA7C,CAAA;EACD;;ECLD,IAAIE,UAAU,GAAGC,KAAK,CAACC,SAAvB,CAAA;EACO,IAAIC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcL,UAAd,CAAnB;;EACP,IAAIM,OAAO,GAAG,CACZ,MADY,EAEZ,OAFY,EAGZ,SAHY,EAIZ,QAJY,EAKZ,KALY,EAMZ,MANY,EAOZ,SAPY,CAAd,CAAA;EAUAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACxBL,EAAAA,YAAY,CAACK,MAAD,CAAZ,GAAuB,YAAmB;EAAA,IAAA,IAAA,kBAAA,CAAA;;EAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANC,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;EAANA,MAAAA,IAAM,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,KAAA;;EAAE;EAC5C;EACE,IAAAT,CAAAA,kBAAAA,GAAAA,UAAU,CAACQ,MAAD,CAAV,EAAmBE,IAAnB,CAAA,KAAA,CAAA,kBAAA,EAAA,CAAwB,IAAxB,CAAA,CAAA,MAAA,CAAiCD,IAAjC,CAAA,CAAA,CAFwC;;;EAGxC,IAAA,IAAIE,QAAJ,CAAA;EACA,IAAA,IAAIC,EAAE,GAAG,IAAKC,CAAAA,MAAd,CAJwC;;EAKxC,IAAA,QAAQL,MAAR;EAAkB;EAChB,MAAA,KAAK,MAAL,CAAA;EACA,MAAA,KAAK,OAAL;EACEG,QAAAA,QAAQ,GAAGF,IAAX,CAAA;EACA,QAAA,MAAA;;EACF,MAAA,KAAK,QAAL;EAAe;EACbE,QAAAA,QAAQ,GAAGF,IAAI,CAACK,KAAL,CAAW,CAAX,CAAX,CAAA;EACA,QAAA,MAAA;EAPJ,KAAA;;EAWA,IAAIH,IAAAA,QAAJ,EAAcC,EAAE,CAACG,aAAH,CAAiBJ,QAAjB,EAhB0B;EAiBzC,GAjBD,CAAA;EAkBD,CAnBD,CAAA;;ECPA;;MAEMK;EACJ,EAAA,SAAA,QAAA,CAAYC,IAAZ,EAAkB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;;EAChB;EACE;EACA;EACF;EACA;EACAb,IAAAA,MAAM,CAACc,cAAP,CAAsBD,IAAtB,EAA2B,QAA3B,EAAoC;EAClCnB,MAAAA,KAAK,EAAE,IAD2B;EAElCqB,MAAAA,UAAU,EAAE,KAFsB;;EAAA,KAApC,CAAA,CAAA;;EAIA,IAAA,IAAGlB,KAAK,CAACmB,OAAN,CAAcH,IAAd,CAAH,EAAuB;EAAE;EACvB;EACAA,MAAAA,IAAI,CAACI,SAAL,GAAiBlB,YAAjB,CAFqB;;EAGrB,MAAA,IAAA,CAAKY,aAAL,CAAmBE,IAAnB,CAAA,CAHqB;EAItB,KAJD,MAIM;EAAE;EACN,MAAA,IAAA,CAAKK,IAAL,CAAUL,IAAV,CAAA,CADI;EAEL,KAAA;EACF,GAAA;;;;EACD,IAAA,KAAA,EAAA,SAAA,aAAA,CAAcA,IAAd,EAAmB;EACjB,MAAA,KAAI,IAAIM,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAACN,IAAI,CAACO,MAAtB,EAA8BD,CAAC,EAA/B,EAAmC;EAAE;EACnCE,QAAAA,OAAO,CAACR,IAAI,CAACM,CAAD,CAAL,CAAP,CAAA;EACD,OAAA;EACF,KAAA;;;EAED,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKN,IAAL,EAAW;EACTb,MAAAA,MAAM,CAACsB,IAAP,CAAYT,IAAZ,EAAkBV,OAAlB,CAA0B,UAAAoB,GAAG,EAAI;EAAE;EACjCC,QAAAA,cAAc,CAACX,IAAD,EAAOU,GAAP,EAAYV,IAAI,CAACU,GAAD,CAAhB,CAAd,CAAA;EACD,OAFD,CAAA,CAAA;EAGD,KAAA;;;;;;EAKH,SAASC,cAAT,CAAwBX,IAAxB,EAA6BU,GAA7B,EAAiC7B,KAAjC,EAAwC;EAAE;EACxC2B,EAAAA,OAAO,CAAC3B,KAAD,CAAP,CADsC;;EAEtCM,EAAAA,MAAM,CAACc,cAAP,CAAsBD,IAAtB,EAA2BU,GAA3B,EAA+B;EAC7BE,IAAAA,GAD6B,EACvB,SAAA,GAAA,GAAA;EACJ,MAAA,OAAO/B,KAAP,CAAA;EACD,KAH4B;EAI7BgC,IAAAA,GAJ6B,EAIzBC,SAAAA,GAAAA,CAAAA,QAJyB,EAIf;EACZ;EACAN,MAAAA,OAAO,CAACM,QAAD,CAAP,CAAA;EACAjC,MAAAA,KAAK,GAAGiC,QAAR,CAAA;EACD,KAAA;EAR4B,GAA/B,CAAA,CAAA;EAUD,CAAA;;EAGM,SAASN,OAAT,CAAiBR,IAAjB,EAAuB;EAAE;EAC9B;EACA,EAAA,IAAI,CAAClB,QAAQ,CAACkB,IAAD,CAAb,EAAqB;EACnB,IAAA,OAAA;EACD,GAAA;;EAED,EAAGA,IAAAA,IAAI,CAACJ,MAAR,EAAe;EACb,IAAA,OAAA;EACD,GAR2B;;;EAW5B,EAAA,OAAO,IAAIG,QAAJ,CAAaC,IAAb,CAAP,CAX4B;EAY7B,CAAA;EAGD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EChFO,SAASe,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,EAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAAA;;EACA,EAAGD,IAAAA,IAAI,CAACjB,IAAR,EAAc;EAAE;EACdmB,IAAAA,QAAQ,CAACH,EAAD,CAAR,CADY;EAEb,GAJ2B;EAM5B;EAEA;EACA;EACA;EACA;;EACD,CAAA;;EAED,SAASG,QAAT,CAAkBH,EAAlB,EAAsB;EAAE;EACtB,EAAIhB,IAAAA,IAAI,GAAGgB,EAAE,CAACE,QAAH,CAAYlB,IAAvB,CADoB;EAEpB;EAEA;;EACAA,EAAAA,IAAI,GAAGgB,EAAE,CAACI,KAAH,GAAWxC,UAAU,CAACoB,IAAD,CAAV,GAAmBA,IAAI,CAACP,IAAL,CAAUuB,EAAV,CAAnB,GAAmChB,IAArD,CAAA;;EACA,EAAA,KAAK,IAAMU,GAAX,IAAkBV,IAAlB,EAAwB;EAAE;EACxBqB,IAAAA,KAAK,CAACL,EAAD,EAAI,OAAJ,EAAYN,GAAZ,CAAL,CAAA;EACD,GARmB;;;EAUpBF,EAAAA,OAAO,CAACR,IAAD,CAAP,CAAA;EACD,CAAA;;EAED,SAASqB,KAAT,CAAeL,EAAf,EAAkBM,MAAlB,EAAyBZ,GAAzB,EAA8B;EAC5BvB,EAAAA,MAAM,CAACc,cAAP,CAAsBe,EAAtB,EAAyBN,GAAzB,EAA6B;EAC3BE,IAAAA,GAD2B,EACrB,SAAA,GAAA,GAAA;EACJ,MAAA,OAAOI,EAAE,CAACM,MAAD,CAAF,CAAWZ,GAAX,CAAP,CAAA;EACD,KAH0B;EAI3BG,IAAAA,GAJ2B,EAIvBC,SAAAA,GAAAA,CAAAA,QAJuB,EAIb;EACZE,MAAAA,EAAE,CAACM,MAAD,CAAF,CAAWZ,GAAX,IAAkBI,QAAlB,CAAA;EACD,KAAA;EAN0B,GAA7B,CAAA,CAAA;EAQD;;ECrCD,IAAMS,MAAM,GAAZ,8BAAA;;EACA,IAAMC,YAAY,GAAUD,MAAAA,CAAAA,MAAAA,CAAAA,MAAV,kBAAwBA,MAAxB,EAAA,GAAA,CAAlB;EACA;;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,CAAA,CAArB;EACA;;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,EAAA,QAAA,CAAA,CAAf;;EACA,IAAMI,SAAS,GAAG,2EAAlB;;EACA,IAAMC,aAAa,GAAG,YAAtB;;EAGA,IAAIC,IAAI,GAAG,IAAX,CAAA;EACA,IAAIC,UAAJ,CAAA;EACA,IAAIC,KAAK,GAAG,EAAZ,CAAA;EACA,IAAMC,YAAY,GAAG,CAArB;;EACA,IAAMC,SAAS,GAAG,CAAlB;EAEA;;EACO,SAASC,UAAT,CAAoBC,IAApB,EAA0B;EAAE;EACjC,EAAA,OAAOA,IAAP,EAAa;EAAE;EACb,IAAIC,IAAAA,OAAO,GAAGD,IAAI,CAACE,OAAL,CAAa,GAAb,CAAd,CADW;;EAEX,IAAID,IAAAA,OAAO,IAAI,CAAf,EAAkB;EAChB,MAAA,IAAME,aAAa,GAAGC,aAAa,EAAnC,CADgB;;EAEhB,MAAA,IAAID,aAAJ,EAAmB;EACjBE,QAAAA,KAAK,CAACF,aAAa,CAACG,OAAf,EAAwBH,aAAa,CAACI,KAAtC,CAAL,CAAA;EACA,QAAA,SAAA;EACD,OAAA;;EAED,MAAA,IAAMC,WAAW,GAAGC,WAAW,CAAA,CAA/B,CAAA;;EACA,MAAA,IAAID,WAAJ,EAAiB;EACfE,QAAAA,GAAG,CAACF,WAAW,CAAC,CAAD,CAAZ,CAAH,CAAA;EACA,QAAA,SAAA;EACD,OAAA;EAEF,KAAA;;EACD,IAAA,IAAIG,IAAI,GAAR,KAAA,CAAA,CAAA;;EACA,IAAIV,IAAAA,OAAO,GAAG,CAAd,EAAiB;EACfU,MAAAA,IAAI,GAAGX,IAAI,CAACY,SAAL,CAAe,CAAf,EAAkBX,OAAlB,CAAP,CAAA;EACD,KAAA;;EACD,IAAA,IAAIU,IAAJ,EAAU;EACRE,MAAAA,KAAK,CAACF,IAAD,CAAL,CAAA;EACAG,MAAAA,OAAO,CAACH,IAAI,CAACxC,MAAN,CAAP,CAAA;EACD,KAAA;EAEF,GAAA;;EAED,EAAA,SAASiC,aAAT,GAAyB;EACvB,IAAIC,IAAAA,KAAK,GAAGL,IAAI,CAACe,KAAL,CAAW1B,YAAX,CAAZ,CADuB;;EAEvB,IAAA,IAAIgB,KAAJ,EAAW;EAAE;EACX,MAAA,IAAMU,KAAK,GAAG;EACZT,QAAAA,OAAO,EAAED,KAAK,CAAC,CAAD,CADF;EAEZE,QAAAA,KAAK,EAAE,EAAA;EAFK,OAAd,CAAA;EAIAO,MAAAA,OAAO,CAACT,KAAK,CAAC,CAAD,CAAL,CAASlC,MAAV,CAAP,CALS;;EAMT,MAAA,IAAIuC,IAAJ,EAASM,IAAT,CANS;;;EAQT,MAAA,OAAO,EAAEN,IAAG,GAAGV,IAAI,CAACe,KAAL,CAAWtB,aAAX,CAAR,MAAuCuB,IAAI,GAAGhB,IAAI,CAACe,KAAL,CAAWvB,SAAX,CAA9C,CAAP,EAA6E;EAC3EuB,QAAAA,KAAK,CAACR,KAAN,CAAYU,IAAZ,CAAiB;EAAEC,UAAAA,IAAI,EAAEF,IAAI,CAAC,CAAD,CAAZ;EAAiBvE,UAAAA,KAAK,EAAEuE,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAAA;EAAlD,SAAjB,CAAA,CAAA;EACAF,QAAAA,OAAO,CAACE,IAAI,CAAC,CAAD,CAAJ,CAAQ7C,MAAT,CAAP,CAF2E;EAG5E,OAAA;;EACD,MAAA,IAAIuC,IAAJ,EAAS;EAAE;EACTI,QAAAA,OAAO,CAACJ,IAAG,CAAC,CAAD,CAAH,CAAOvC,MAAR,CAAP,CAAA;EACA,QAAA,OAAO4C,KAAP,CAAA;EACD,OAAA;EACF,KAAA;EACF,GAAA;;EAED,EAAA,SAASN,WAAT,GAAuB;EACrB,IAAID,IAAAA,WAAW,GAAGR,IAAI,CAACe,KAAL,CAAWxB,MAAX,CAAlB,CADqB;;EAErBuB,IAAAA,OAAO,CAACN,WAAW,CAAC,CAAD,CAAX,CAAerC,MAAhB,CAAP,CAAA;EACA,IAAA,OAAOqC,WAAP,CAAA;EACD,GAAA;;EAED,EAASM,SAAAA,OAAT,CAAiBK,GAAjB,EAAsB;EACpBnB,IAAAA,IAAI,GAAGA,IAAI,CAACY,SAAL,CAAeO,GAAf,CAAP,CAAA;EACD,GAAA;;EAED,EAAA,OAAOzB,IAAP,CAAA;EACD,CAAA;;EAGD,SAAS0B,aAAT,CAAuBd,OAAvB,EAAgCC,KAAhC,EAAuC;EACrC,EAAO,OAAA;EACLc,IAAAA,IAAI,EAAExB,YADD;EAELyB,IAAAA,GAAG,EAAEhB,OAFA;EAGLiB,IAAAA,QAAQ,EAAE,EAHL;EAILhB,IAAAA,KAAK,EAALA,KAJK;EAKLiB,IAAAA,MAAM,EAAE,IAAA;EALH,GAAP,CAAA;EAOD,CAAA;;EAED,SAASnB,KAAT,CAAeC,OAAf,EAAwBmB,QAAxB,EAAkC;EAChC,EAAA,IAAIC,OAAO,GAAGN,aAAa,CAACd,OAAD,EAAUmB,QAAV,CAA3B,CAAA;;EACA,EAAI,IAAA,CAAC/B,IAAL,EAAW;EACTA,IAAAA,IAAI,GAAGgC,OAAP,CAAA;EACD,GAAA;;EACD9B,EAAAA,KAAK,CAACqB,IAAN,CAAWS,OAAX,CAAA,CAAA;EACA/B,EAAAA,UAAU,GAAG+B,OAAb,CAAA;EACD,CAAA;;EACD,SAAShB,GAAT,CAAaJ,OAAb,EAAsB;EACpB,EAAA,IAAIqB,cAAc,GAAG/B,KAAK,CAACgC,GAAN,EAArB,CAAA;EACA,EAAIC,IAAAA,aAAa,GAAGjC,KAAK,CAACA,KAAK,CAACzB,MAAN,GAAe,CAAhB,CAAzB,CAAA;;EACA,EAAA,IAAImC,OAAO,IAAIqB,cAAc,CAACL,GAA9B,EAAmC;EACjC,IAAA,IAAIO,aAAJ,EAAmB;EACjBA,MAAAA,aAAa,CAACN,QAAd,CAAuBN,IAAvB,CAA4BU,cAA5B,CAAA,CAAA;EACAA,MAAAA,cAAc,CAACH,MAAf,GAAwBK,aAAxB,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;;EACD,SAAShB,KAAT,CAAeF,IAAf,EAAqB;EACnBA,EAAAA,IAAI,GAAGA,IAAI,CAACmB,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP,CAAA;;EACA,EAAA,IAAInB,IAAJ,EAAU;EACRhB,IAAAA,UAAU,CAAC4B,QAAX,CAAoBN,IAApB,CAAyB;EACvBI,MAAAA,IAAI,EAAEvB,SADiB;EAEvBa,MAAAA,IAAI,EAAJA,IAAAA;EAFuB,KAAzB,CAAA,CAAA;EAID,GAAA;EACF;;ECpHD,IAAMoB,YAAY,GAAG,0BAArB;;EAEA,SAASC,SAAT,CAAmBzB,KAAnB,EAA0B;EACxB,EAAA,IAAI0B,KAAK,GAAT,EAAA,CAAA;EACA1B,EAAAA,KAAK,CAACrD,OAAN,CAAc,UAAA8D,IAAI,EAAI;EACpB,IAAA,IAAGA,IAAI,CAACE,IAAL,KAAc,OAAjB,EAA0B;EACxB,MAAIgB,IAAAA,GAAG,GAAG,EAAV,CAAA;EACAlB,MAAAA,IAAI,CAACvE,KAAL,CAAW0F,KAAX,CAAiB,GAAjB,CAAA,CAAsBjF,OAAtB,CAA8B,UAAAkF,SAAS,EAAI;EACzC,QAAA,IAAA,gBAAA,GAAkBA,SAAS,CAACD,KAAV,CAAgB,GAAhB,CAAlB;EAAA,YAAA,iBAAA,GAAA,cAAA,CAAA,gBAAA,EAAA,CAAA,CAAA;EAAA,YAAK7D,GAAL,GAAA,iBAAA,CAAA,CAAA,CAAA;EAAA,YAAS7B,KAAT,GAAA,iBAAA,CAAA,CAAA,CAAA,CAAA;;EACAyF,QAAAA,GAAG,CAAC5D,GAAD,CAAH,aAAc7B,KAAd,CAAA,CAAA;EACD,OAHD,CAAA,CAAA;EAIAuE,MAAAA,IAAI,CAACvE,KAAL,GAAayF,GAAb,CAAA;EACD,KAAA;;EACDD,IAAAA,KAAK,IAAA,EAAA,CAAA,MAAA,CAAOjB,IAAI,CAACE,IAAZ,EAAoBmB,GAAAA,CAAAA,CAAAA,MAAAA,CAAAA,IAAI,CAACC,SAAL,CAAetB,IAAI,CAACvE,KAApB,CAApB,EAAL,GAAA,CAAA,CAAA;EACD,GAVD,CAAA,CAAA;EAWA,EAAWwF,OAAAA,GAAAA,CAAAA,MAAAA,CAAAA,KAAK,CAACxE,KAAN,CAAY,CAAZ,EAAc,CAAC,CAAf,CAAX,EAAA,GAAA,CAAA,CAAA;EACD,CAAA;;EAED,SAAS8E,GAAT,CAAaC,IAAb,EAAmB;EACjB,EAAA,IAAGA,IAAI,CAACnB,IAAL,IAAa,CAAhB,EAAkB;EAChB,IAAOoB,OAAAA,QAAQ,CAACD,IAAD,CAAf,CAAA;EACD,GAFD,MAEM;EACJ,IAAA,IAAI7B,IAAI,GAAG6B,IAAI,CAAC7B,IAAhB,CAAA;EACA,IAAI+B,IAAAA,MAAM,GAAG,EAAb,CAAA;EACA,IAAA,IAAI3B,KAAJ,CAAA;EACA,IAAA,IAAI4B,SAAS,GAAGZ,YAAY,CAACY,SAAb,GAAyB,CAAzC,CAAA;;EACA,IAAM5B,OAAAA,KAAK,GAAGgB,YAAY,CAACa,IAAb,CAAkBjC,IAAlB,CAAd,EAAsC;EACpC,MAAA,IAAIkC,KAAK,GAAG9B,KAAK,CAAC8B,KAAlB,CADoC;;EAEpC,MAAGA,IAAAA,KAAK,GAAGF,SAAX,EAAsB;EACpBD,QAAAA,MAAM,CAACzB,IAAP,CAAYoB,IAAI,CAACC,SAAL,CAAe3B,IAAI,CAAClD,KAAL,CAAWkF,SAAX,EAAqBE,KAArB,CAAf,CAAZ,EADoB;EAErB,OAAA;;EACDH,MAAAA,MAAM,CAACzB,IAAP,CAAYF,KAAK,CAAC,CAAD,CAAL,CAAS+B,IAAT,EAAZ,CAAA,CALoC;;EAMpCH,MAAAA,SAAS,GAAGE,KAAK,GAAG9B,KAAK,CAAC,CAAD,CAAL,CAAS5C,MAA7B,CAAA;EACD,KAAA;;EACD,IAAA,IAAGwE,SAAS,GAAChC,IAAI,CAACxC,MAAlB,EAA0B;EACxBuE,MAAAA,MAAM,CAACzB,IAAP,CAAYN,IAAI,CAAClD,KAAL,CAAWkF,SAAX,CAAZ,CAAA,CAAA;EACD,KAAA;;EACD,IAAA,OAAA,KAAA,CAAA,MAAA,CAAaD,MAAM,CAACK,IAAP,CAAY,GAAZ,CAAb,EAAA,GAAA,CAAA,CAAA;EACD,GAAA;EACF,CAAA;;EAED,SAASC,YAAT,CAAsBtD,IAAtB,EAA4B;EAC1B,EAAA,IAAI6B,QAAQ,GAAG7B,IAAI,CAAC6B,QAApB,CAAA;;EACA,EAAA,IAAGA,QAAQ,IAAIA,QAAQ,CAACpD,MAAT,GAAkB,CAAjC,EAAoC;EAClC,IAAA,OAAOoD,QAAQ,CAAC0B,GAAT,CAAa,UAAAC,CAAC,EAAA;EAAA,MAAIX,OAAAA,GAAG,CAACW,CAAD,CAAP,CAAA;EAAA,KAAd,CAA0BH,CAAAA,IAA1B,CAA+B,GAA/B,CAAP,CAAA;EACD,GAFD,MAEK;EACH,IAAA,OAAO,KAAP,CAAA;EACD,GAAA;EACF,CAAA;;EAEM,SAASN,QAAT,CAAkB/C,IAAlB,EAAwB;EAC/B,EAAA,IAAI6B,QAAQ,GAAGyB,YAAY,CAACtD,IAAD,CAA3B,CAAA;EACE,EAAA,IAAIyD,IAAI,GAAA,MAAA,CAAA,MAAA,CAAUzD,IAAI,CAAC4B,GAAf,EAAA,IAAA,CAAA,CAAA,MAAA,CAAuB5B,IAAI,CAACa,KAAL,CAAWpC,MAAX,GAAoB,CAApB,GAAwB6D,SAAS,CAACtC,IAAI,CAACa,KAAN,CAAjC,GAAgD6C,SAAvE,CAAmF7B,CAAAA,MAAAA,CAAAA,QAAQ,GAAOA,GAAAA,CAAAA,MAAAA,CAAAA,QAAP,CAAoB,GAAA,EAA/G,EAAR,GAAA,CAAA,CAAA;EACA8B,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,CAAA,CAAA;EACA,EAAA,OAAOA,IAAP,CAAA;EACD;;ECrDM,SAASI,iBAAT,CAA2BC,QAA3B,EAAqC;EAC1C,EAAA,IAAI9D,IAAI,GAAGK,UAAU,CAACyD,QAAD,CAArB,CAD0C;;EAE1C,EAAWf,QAAQ,CAAC/C,IAAD,EAFuB;EAK3C;;ECLM,SAAS+D,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAAC7G,SAAJ,CAAc8G,KAAd,GAAsB,UAASC,OAAT,EAAkB;EACtC,IAAA,IAAMhF,EAAE,GAAG,IAAX,CADsC;;EAEtCA,IAAAA,EAAE,CAACE,QAAH,GAAc8E,OAAd,CAFsC;EAItC;;EACAjF,IAAAA,SAAS,CAACC,EAAD,CAAT,CAAA;;EAEA,IAAA,IAAGA,EAAE,CAACE,QAAH,CAAY+E,EAAf,EAAkB;EAChBjF,MAAAA,EAAE,CAACkF,MAAH,CAAUlF,EAAE,CAACE,QAAH,CAAY+E,EAAtB,CAAA,CADgB;EAEjB,KAAA;EACF,GAVD,CAAA;;EAWAH,EAAAA,GAAG,CAAC7G,SAAJ,CAAciH,MAAd,GAAuB,UAASD,EAAT,EAAa;EAClC,IAAMjF,IAAAA,EAAE,GAAG,IAAX,CAAA;EACA,IAAA,IAAIgF,OAAO,GAAGhF,EAAE,CAACE,QAAjB,CAAA;EACA+E,IAAAA,EAAE,GAAGE,QAAQ,CAACC,aAAT,CAAuBH,EAAvB,CAAL,CAAA;;EACA,IAAA,IAAG,CAACD,OAAO,CAACK,MAAZ,EAAoB;EAAE;EACpB,MAAA,IAAIT,QAAQ,GAAGI,OAAO,CAACJ,QAAvB,CAAA;;EACA,MAAA,IAAG,CAACA,QAAD,IAAaK,EAAhB,EAAoB;EAAE;EACpBL,QAAAA,QAAQ,GAAGK,EAAE,CAACK,SAAd,CADkB;;EAElB,QAAA,IAAID,MAAM,GAAGV,iBAAiB,CAACC,QAAD,CAA9B,CAAA;EACAI,QAAAA,OAAO,CAACK,MAAR,GAAiBA,MAAjB,CAHkB;EAInB,OAAA;EACF,KAAA;EACF,GAZD,CAAA;EAcD;;EC5BD,SAASP,GAAT,CAAcE,OAAd,EAAuB;EACrB;EACA,EAAA,IAAA,CAAKD,KAAL,CAAWC,OAAX,CAAA,CAFqB;;EAGtB,CAAA;;EAEDH,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}